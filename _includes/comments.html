{%- if page.comments != false and jekyll.environment == "production" -%}
<div class="show-comments">
  <button id="show-comments-button" onclick="disqus()">Tampilkan Komentar</button>
</div>

<script>
  var is_disqus_loaded = false;

  function disqus() {
    if(is_disqus_loaded) return;

    is_disqus_loaded = true;

    var loadCommentsBtn = document.getElementById('show-comments-button');
    var title = document.createElement('h2');
    title.appendChild(document.createTextNode('Komentar'));
    var thread = document.createElement('div');
    thread.id = 'disqus_thread';

    loadCommentsBtn.style.display = 'none';
    loadCommentsBtn.parentNode.insertBefore(title, loadCommentsBtn);
    loadCommentsBtn.parentNode.insertBefore(thread, title.nextSibling);

    var disqus_config = function () {
      this.page.url = '{{ page.url | absolute_url }}';
      this.page.identifier = '{{ page.url | absolute_url }}';
    };

    (function () {
      var d = document, s = d.createElement('script');

      s.src = 'https://{{ site.disqus.shortname }}.disqus.com/embed.js';

      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  }
  
</script>
<noscript>
  Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
{%- endif -%}